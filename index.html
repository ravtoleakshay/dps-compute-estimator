<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>MES Storage & Compute Estimator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        background: #f6f8fc;
      }

      .left-panel {
        background: #ffffff;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 12px -4px rgba(0, 0, 0, 0.1);
        height: 100%;
      }

      .right-panel {
        background: #ffffff;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 12px -4px rgba(0, 0, 0, 0.12);
        height: 100%;
      }

      .section-title {
        font-weight: 600;
        color: #6c757d;
        text-transform: uppercase;
        font-size: 0.8rem;
        margin-bottom: 4px;
      }

      .module-list {
        max-height: 250px;
        overflow-y: auto;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 6px;
        background: #fafafa;
      }

      /* PRINT ONLY RIGHT SIDE */
      @media print {
        body * {
          visibility: hidden;
        }
        #summaryPanel,
        #summaryPanel * {
          visibility: visible;
        }

        #summaryPanel {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          padding: 20px;
        }

        .no-print {
          display: none !important;
        }
      }
    </style>
  </head>

  <body>
    <div class="container py-4">
      <div class="row g-4">
        <!-- LEFT INPUT PANEL ------------------------------------------------------------>
        <div class="col-12 col-lg-4">
          <div class="left-panel">
            <h4 class="mb-3">MES Input Parameters</h4>

            <!-- TIMESERIES INPUTS -->
            <div class="mb-3">
              <div class="section-title">Timeseries Data</div>
              <div class="row">
                <div class="col-md-6">
                  <label class="form-label"># Assets</label>
                  <input
                    type="number"
                    id="stAssets"
                    class="form-control"
                    value="4"
                    max="40"
                  />
                </div>

                <div class="col-md-6">
                  <label class="form-label"># Tags per Asset</label>
                  <input
                    type="number"
                    id="stTagsPerAsset"
                    class="form-control"
                    value="150"
                    max="200"
                  />
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <label class="form-label mt-2">Updates/Min/Tag</label>
                  <input
                    type="number"
                    id="stUpdatesPerMinPerTag"
                    class="form-control"
                    value="60"
                    step="0.01"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label mt-2">Row Size (Bytes)</label>
                  <input
                    type="number"
                    id="stRowSizeBytes"
                    class="form-control"
                    value="4"
                  />
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <label class="form-label mt-2">Retention Months - TS</label>
                  <input
                    type="number"
                    id="stRetentionMonths"
                    class="form-control"
                    value="12"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label mt-2">Compression Ratio</label>
                  <input
                    type="number"
                    id="stCompressionRatio"
                    class="form-control"
                    value="0.6"
                    step="0.05"
                  />
                </div>
              </div>
            </div>

            <hr />

            <!-- COMPUTE INPUTS -->
            <div class="mb-3">
              <div class="section-title">Process Data - Compute Sizing</div>

              <div class="row">
                <div class="col-md-6">
                  <label class="form-label">Retention Months</label>
                  <input
                    type="number"
                    id="cpRetention"
                    class="form-control"
                    value="6"
                  />
                </div>
                <div class="col-md-6">
                  <label class="form-label">Environment</label>
                  <select id="cpEnvironment" class="form-select">
                    <option value="0.5">Dev / Sandbox</option>
                    <option value="0.75">Test / QA</option>
                    <option value="1" selected>Production</option>
                    <option value="1.25">Prod High SLA</option>
                  </select>
                </div>
              </div>
            </div>

            <hr />

            <!-- MODULES INPUT -->
            <div class="mb-3">
              <div class="section-title">Modules</div>
              <div id="moduleList" class="module-list"></div>
            </div>

            <!-- BUTTONS -->
            <div class="d-flex gap-2 mt-4">
              <button class="btn btn-primary w-100" id="calculateBtn">
                Calculate
              </button>
              <button class="btn btn-secondary w-100" id="resetBtn">
                Reset
              </button>
            </div>

            <button
              class="btn btn-outline-dark w-100 mt-2 no-print"
              onclick="window.print()"
            >
              ðŸ–¨ Print Summary
            </button>
          </div>
        </div>

        <!-- RIGHT OUTPUT PANEL ----------------------------------------------------------->
        <!-- RIGHT OUTPUT PANEL ----------------------------------------------------------->
        <div class="col-12 col-lg-8">
          <div id="summaryPanel" class="right-panel">
            <h4 class="mb-3">Sizing Summary</h4>

            <!-- Module Summary -->
            <div class="p-3 mb-3 rounded shadow-sm" style="background: #eef2ff">
              <div class="d-flex justify-content-between">
                <h6 class="text-primary fw-bold mb-1">Enabled Modules</h6>
                <span class="badge bg-primary text-light">Modules</span>
              </div>
              <div id="summaryModules" class="small mt-2"></div>
            </div>

            <!-- Timeseries Storage -->
            <div class="p-3 mb-3 rounded shadow-sm" style="background: #e8fff3">
              <div class="d-flex justify-content-between">
                <h6 class="text-success fw-bold mb-1">Timeseries Storage</h6>
                <span class="badge bg-success text-light"
                  >TimescaleDB Storage</span
                >
              </div>
              <p class="mb-1">
                <strong>Total Tags:</strong> <span id="sumTotalTags">â€“</span>
              </p>
              <p class="mb-1">
                <strong>Events/Day:</strong> <span id="sumEventsPerDay">â€“</span>
              </p>
              <p class="mb-1">
                <strong>Uncompressed:</strong>
                <span id="sumUncompressedGB">â€“</span> GB (<span
                  id="sumUncompressedTB"
                ></span
                >)
              </p>
              <!-- <p class="mb-0">
                <strong>Compressed:</strong>
                <span id="sumCompressedGB">â€“</span> GB (<span
                  id="sumCompressedTB"
                ></span
                >)
              </p> -->
            </div>

            <!-- CPU Recommendation -->
            <div class="p-3 mb-3 rounded shadow-sm" style="background: #fff3e6">
              <div class="d-flex justify-content-between">
                <h6 class="text-warning fw-bold mb-1">CPU Recommendation</h6>
                <span class="badge bg-warning text-dark">CPU</span>
              </div>
              <p class="mb-1">
                <strong>Required vCPUs:</strong> <span id="sumCores">â€“</span>
              </p>
              <!-- <p class="mb-0">
                <strong>Suggested Intel CPU:</strong>
                <span id="sumIntelCPU">â€“</span>
              </p> -->
            </div>

            <!-- RAM Recommendation -->
            <div class="p-3 mb-3 rounded shadow-sm" style="background: #e6f7ff">
              <div class="d-flex justify-content-between">
                <h6 class="text-info fw-bold mb-1">Memory Recommendation</h6>
                <span class="badge bg-info text-dark">RAM</span>
              </div>
              <p class="mb-0">
                <strong>Required RAM:</strong> <span id="sumRamGB">â€“</span> GB
              </p>
            </div>

            <!-- Process Data Storage -->
            <div class="p-3 rounded shadow-sm" style="background: #fde7f3">
              <div class="d-flex justify-content-between">
                <h6 class="text-danger fw-bold mb-1">Process Data Storage</h6>
                <span class="badge bg-danger text-light"
                  >PostgeSQL Storage</span
                >
              </div>
              <p class="mb-0">
                <strong>Required:</strong>
                <span id="sumProcessStorageGB">â€“</span> GB
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="./main.js"></script>
  </body>
</html>
